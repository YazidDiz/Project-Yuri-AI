const fs = require("fs");
const moment = require("moment-timezone");
const axios = require("axios"); module.exports.config = {
  name: "tempbanuser",
  version: "1.0.0",
  hasPermssion: 2,
  credits: "RÃ©ynÃ©l",
  description: "Temporarily ban a user from the group for a specified duration.",
  commandCategory: "system",
  usages: "[id] [duration: Xs, Xm, Xh, Xd]",
  cooldowns: 5 }; module.exports.run = async function ({ api, args, event }) { const { messageID, threadID, senderID } = event; const info = await api.getThreadInfo(threadID); if (!info.adminIDs.some(item => item.id == api.getCurrentUserID())) return api.sendMessage('âŽ | ð–¬ð–ºð—Œð—ð–¾ð—‹, ð–¨ ð—ð–ºð—ð–¾ ð—‡ð—ˆ ð—‹ð—‚ð—€ð—ð—ð—Œ ð—ð—ˆ ð—‰ð–¾ð—‹ð–¿ð—ˆð—‹ð—† ð—ð—ð–¾ ð—ð–¾ð—†ð—‰ð–»ð–ºð—‡ð—Žð—Œð–¾ð—‹ ð—‚ð—‡ ð—ð—ð—‚ð—Œ ð—€ð—‹ð—ˆð—Žð—‰.', threadID, messageID); const fs = require("fs-extra"); if (!fs.existsSync(__dirname + `/cache/tempbans.json`)) { const data = { tempbans: {} }; fs.writeFileSync(__dirname + `/cache/tempbans.json`, JSON.stringify(data)); } const tempbans = JSON.parse(fs.readFileSync(__dirname + `/cache/tempbans.json`)); const userID = args[0]; if (!userID || isNaN(userID)) return api.sendMessage("âŽ | ð–¬ð–ºð—Œð—ð–¾ð—‹, ð—‰ð—…ð–¾ð–ºð—Œð–¾ ð—‰ð—‹ð—ˆð—ð—‚ð–½ð–¾ ð–º ð—ð–ºð—…ð—‚ð–½ ð–¥ð–ºð–¼ð–¾ð–»ð—ˆð—ˆð—„ ð–¨ð–£ ð—ð—ˆ ð—ð–¾ð—†ð—‰ð—ˆð—‹ð–ºð—‹ð—‚ð—…ð—’ ð–»ð–ºð—‡ ð—ð—ð–¾ ð—Žð—Œð–¾ð—‹.", threadID, messageID); if (tempbans.tempbans.hasOwnProperty(threadID) && tempbans.tempbans[threadID][userID]) { return api.sendMessage("ðŸš« | ð–²ð–¾ð—‡ð—Œð–¾ð—‚, ð—’ð—ˆð—Ž ð–ºð—‹ð–¾ ð—ð–¾ð—†ð—‰ð—ˆð—‹ð–ºð—‹ð—‚ð—…ð—’ ð–»ð–ºð—‡ð—‡ð–¾ð–½ ð–¿ð—‹ð—ˆð—† ð—Žð—Œð—‚ð—‡ð—€ ð—†ð–¾. ð–¨ð–¿ ð—’ð—ˆð—Ž ð–»ð–¾ð—…ð—‚ð–¾ð—ð–¾ ð—ð—ð—‚ð—Œ ð—‚ð—Œ ð–º ð—†ð—‚ð—Œð—ð–ºð—„ð–¾ ð—ˆð—‹ ð—‡ð–¾ð–¾ð–½ ð–¿ð—Žð—‹ð—ð—ð–¾ð—‹ ð–ºð—Œð—Œð—‚ð—Œð—ð–ºð—‡ð–¼ð–¾, ð—‰ð—…ð–¾ð–ºð—Œð–¾ ð–¼ð—ˆð—‡ð—ð–ºð–¼ð— ð—†ð—’ ð—†ð–ºð—Œð—ð–¾ð—‹.", threadID, messageID); } if (!args[1] || !args[1].match(/^\d+[s,m,h,d]$/)) return api.sendMessage("âŽ | ð–¬ð–ºð—Œð—ð–¾ð—‹, ð—ð—ð–ºð— ð—‚ð—Œ ð—‚ð—‡ð—ð–ºð—…ð—‚ð–½ ð–½ð—Žð—‹ð–ºð—ð—‚ð—ˆð—‡. ð–¯ð—…ð–¾ð–ºð—Œð–¾ ð—Žð—Œð–¾ ð–º ð—ð–ºð—…ð—‚ð–½ ð–¿ð—ˆð—‹ð—†ð–ºð—: ð–·ð—Œ (ð—Œð–¾ð–¼ð—ˆð—‡ð–½ð—Œ), ð–·ð—† (ð—†ð—‚ð—‡ð—Žð—ð–¾ð—Œ), ð–·ð— (ð—ð—ˆð—Žð—‹ð—Œ), ð—ˆð—‹ ð–·ð–½ (ð–½ð–ºð—’ð—Œ).", threadID, messageID); const duration = args[1]; const durationValue = parseInt(duration); const durationUnit = duration.charAt(duration.length - 1); const validUnits = ['s', 'm', 'h', 'd']; if (!validUnits.includes(durationUnit) || isNaN(durationValue)) return api.sendMessage("âŽ | ð–¬ð–ºð—Œð—ð–¾ð—‹, ð—ð—ð–ºð— ð—‚ð—Œ ð—‚ð—‡ð—ð–ºð—…ð—‚ð–½ ð–½ð—Žð—‹ð–ºð—ð—‚ð—ˆð—‡ ð–¿ð—ˆð—‹ð—†ð–ºð—. ð–¯ð—…ð–¾ð–ºð—Œð–¾ ð—Žð—Œð–¾ ð–º ð—ð–ºð—…ð—‚ð–½ ð–¿ð—ˆð—‹ð—†ð–ºð—: ð–·ð—Œ (ð—Œð–¾ð–¼ð—ˆð—‡ð–½ð—Œ), ð–·ð—† (ð—†ð—‚ð—‡ð—Žð—ð–¾ð—Œ), ð–·ð— (ð—ð—ˆð—Žð—‹ð—Œ), ð—ˆð—‹ ð–·ð–½ (ð–½ð–ºð—’ð—Œ).", threadID, messageID); const reason = args.slice(2).join(" "); if (!reason) return api.sendMessage("âŽ | ð–¬ð–ºð—Œð—ð–¾ð—‹ ð—‰ð—…ð–¾ð–ºð—Œð–¾ ð—‰ð—‹ð—ˆð—ð—‚ð–½ð–¾ ð–º ð—‹ð–¾ð–ºð—Œð—ˆð—‡ ð–¿ð—ˆð—‹ ð—ð—ð–¾ ð—ð–¾ð—†ð—‰ð—ˆð—‹ð–ºð—‹ð—’ ð–»ð–ºð—‡.", threadID, messageID); const timestamp = moment().unix(); const endTime = moment().add(durationValue, durationUnit).unix(); if (!tempbans.tempbans.hasOwnProperty(threadID)) { tempbans.tempbans[threadID] = {}; } tempbans.tempbans[threadID][userID] = { endTime: endTime, reason: reason }; fs.writeFileSync(__dirname + `/cache/tempbans.json`, JSON.stringify(tempbans, null, 2)); api.sendMessage({ body: `ðŸš« | ð–¬ð–ºð—Œð—ð–¾ð—‹, ð—Žð—Œð–¾ð—‹ ð—ð—‚ð—ð— ð–¨ð–£ ${userID} ð—ð–ºð—Œ ð–»ð–¾ð–¾ð—‡ ð—ð–¾ð—†ð—‰ð—ˆð—‹ð–ºð—‹ð—‚ð—…ð—’ ð–»ð–ºð—‡ð—‡ð–¾ð–½ ð–¿ð—‹ð—ˆð—† ð—ð—ð–¾ ð—€ð—‹ð—ˆð—Žð—‰ ð–¿ð—ˆð—‹ ${duration}.\n\nð—¥ð—²ð—®ð˜€ð—¼ð—»: ${reason}`, }, threadID, messageID); setTimeout(() => { if (tempbans.tempbans[threadID][userID] && tempbans.tempbans[threadID][userID].endTime === endTime) { delete tempbans.tempbans[threadID][userID]; fs.writeFileSync(__dirname + `/cache/tempbans.json`, JSON.stringify(tempbans, null, 2)); api.unbanUser(threadID, userID); } }, (endTime - timestamp) * 1000); };