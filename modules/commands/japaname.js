const axios = require('axios');

module.exports.config = {
    name: 'japaname',
    version: '1',
    hasPermission: 0,
    credits: 'RÃ©ynÃ©l',
    description: 'Convert a name into Japanese',
    usages: '[name]',
    commandCategory: 'translator',
    cooldowns: 5,
};

module.exports.run = async ({ api, event, args }) => {
    try {
        const name = args.join(' ');

        if (!name) {
            return api.sendMessage('â„¹ï¸ | ğ–²ğ–¾ğ—‡ğ—Œğ–¾ğ—‚, ğ—‰ğ—…ğ–¾ğ–ºğ—Œğ–¾ ğ—‰ğ—‹ğ—ˆğ—ğ—‚ğ–½ğ–¾ ğ–º ğ—‡ğ–ºğ—†ğ–¾ ğ—ğ—ˆ ğ–¼ğ—ˆğ—‡ğ—ğ–¾ğ—‹ğ—.', event.threadID, event.messageID);
        }

        const apiUrl = `https://japanese-name-converter.august-api.repl.co/convertName?name=${encodeURIComponent(name)}`;
        const response = await axios.get(apiUrl);

        if (response.data.convertedName) {
            api.sendMessage(`âœ… | "${name}" ğ–¼ğ—ˆğ—‡ğ—ğ–¾ğ—‹ğ—ğ–¾ğ–½ ğ—Œğ—ğ–¼ğ–¼ğ–¾ğ—Œğ—Œğ–¿ğ—ğ—…ğ—…ğ—’:\n\n${response.data.convertedName}`, event.threadID, event.messageID);
        } else {
            api.sendMessage('â | ğ–¦ğ—ˆğ—†ğ–¾ğ—‡ ğ—Œğ–¾ğ—‡ğ—Œğ–¾ğ—‚, ğ–»ğ—ğ— ğ–ºğ—‡ ğ–¼ğ—ˆğ—‡ğ—ğ–¾ğ—‹ğ—ğ—‚ğ—‡ğ—€ ğ—‡ğ–ºğ—†ğ–¾. ğ–¯ğ—…ğ–¾ğ–ºğ—Œğ–¾ ğ—ğ—‹ğ—’ ğ–ºğ—€ğ–ºğ—‚ğ—‡ ğ—…ğ–ºğ—ğ–¾ğ—‹.', event.threadID, event.messageID);
        }
    } catch (error) {
        console.error('An error occurred:', error);
        api.sendMessage('â | ğ–¦ğ—ˆğ—†ğ–¾ğ—‡ ğ—Œğ–¾ğ—‡ğ—Œğ–¾ğ—‚, ğ–ºğ—‡ ğ–¾ğ—‹ğ—‹ğ—ˆğ—‹ ğ—ˆğ–¼ğ–¼ğ—ğ—‹ğ—‹ğ–¾ğ–½ ğ—ğ—ğ—‚ğ—…ğ–¾  ğ–¼ğ—ˆğ—‡ğ—ğ–¾ğ—‹ğ—ğ—‚ğ—‡ğ—€ ğ—‡ğ–ºğ—†ğ–¾. ğ–¯ğ—…ğ–¾ğ–ºğ—Œğ–¾ ğ—ğ—‹ğ—’ ğ–ºğ—€ğ–ºğ—‚ğ—‡ ğ—…ğ–ºğ—ğ–¾ğ—‹.', event.threadID, event.messageID);
    }
};